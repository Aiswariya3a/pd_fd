<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Processing Time Comparison Report</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      /* Additional styles for tab switching */
      .tab-buttons {
        text-align: center;
        margin-bottom: 20px;
      }
      .tab-buttons button {
        padding: 10px 20px;
        margin: 0 5px;
        border: none;
        border-radius: 5px;
        background: #2980b9;
        color: #fff;
        font-size: 1em;
        cursor: pointer;
        transition: background 0.3s;
      }
      .tab-buttons button:hover {
        background: #2c3e50;
      }
      .tab-buttons button.active {
        background: #27ae60;
      }
      .tab-content {
        display: none;
      }
      .tab-content.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Processing Time Comparison Report</h1>
      <p>Compare the processing times for FireDucks, Pandas, and Polars</p>
    </header>
    <main>
      <!-- Tab Navigation Buttons -->
      <div class="tab-buttons">
        <button class="tab-button active" onclick="showTab('fd-report', event)">
          FireDucks Report
        </button>
        <button class="tab-button" onclick="showTab('pd-report', event)">
          Pandas Report
        </button>
        <button class="tab-button" onclick="showTab('pol-report', event)">
          Polars Report
        </button>
      </div>

      <!-- FireDucks Report Tab -->
      <div id="fd-report" class="tab-content active">
        <section class="report-section">
          <h2>FireDucks Report</h2>
          <div class="overall-score">
            <h3>
              Chunk Processing Time:
              <span class="highlight">{{ fd_total_time }} seconds</span>
            </h3>
            <p>
              Overall Engagement Score:
              <span class="highlight">{{ fd_overall_score }}</span>
            </p>
          </div>
          <div class="region-scores">
            <h3>Region-wise Engagement Scores:</h3>
            <table class="scores-table">
              <thead>
                <tr>
                  <th>Region</th>
                  <th>Engagement Score</th>
                </tr>
              </thead>
              <tbody>
                {% for region, score in fd_region_scores.items() %}
                <tr>
                  <td>{{ region }}</td>
                  <td>{{ score }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <div class="institution-scores">
            <h3>Institution-wise Engagement Scores:</h3>
            <table class="scores-table">
              <thead>
                <tr>
                  <th>Institution</th>
                  <th>Engagement Score</th>
                </tr>
              </thead>
              <tbody>
                {% for institution, score in fd_institution_scores.items() %}
                <tr>
                  <td>{{ institution }}</td>
                  <td>{{ score }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </section>
      </div>

      <!-- Pandas Report Tab -->
      <div id="pd-report" class="tab-content">
        <section class="report-section">
          <h2>Pandas Report</h2>
          <div class="overall-score">
            <h3>
              Chunk Processing Time:
              <span class="highlight">{{ pd_total_time }} seconds</span>
            </h3>
            <p>
              Overall Engagement Score:
              <span class="highlight">{{ pd_overall_score }}</span>
            </p>
          </div>
          <div class="region-scores">
            <h3>Region-wise Engagement Scores:</h3>
            <table class="scores-table">
              <thead>
                <tr>
                  <th>Region</th>
                  <th>Engagement Score</th>
                </tr>
              </thead>
              <tbody>
                {% for region, score in pd_region_scores.items() %}
                <tr>
                  <td>{{ region }}</td>
                  <td>{{ score }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <div class="institution-scores">
            <h3>Institution-wise Engagement Scores:</h3>
            <table class="scores-table">
              <thead>
                <tr>
                  <th>Institution</th>
                  <th>Engagement Score</th>
                </tr>
              </thead>
              <tbody>
                {% for institution, score in pd_institution_scores.items() %}
                <tr>
                  <td>{{ institution }}</td>
                  <td>{{ score }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </section>
      </div>

      <!-- Polars Report Tab -->
      <div id="pol-report" class="tab-content">
        <section class="report-section">
          <h2>Polars Report</h2>
          <div class="overall-score">
            <h3>
              Chunk Processing Time:
              <span class="highlight">{{ pol_total_time }} seconds</span>
            </h3>
            <p>
              Overall Engagement Score:
              <span class="highlight">{{ pol_overall_score }}</span>
            </p>
          </div>
          <div class="region-scores">
            <h3>Region-wise Engagement Scores:</h3>
            <table class="scores-table">
              <thead>
                <tr>
                  <th>Region</th>
                  <th>Engagement Score</th>
                </tr>
              </thead>
              <tbody>
                {% for region, score in pol_region_scores.items() %}
                <tr>
                  <td>{{ region }}</td>
                  <td>{{ score }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
          <div class="institution-scores">
            <h3>Institution-wise Engagement Scores:</h3>
            <table class="scores-table">
              <thead>
                <tr>
                  <th>Institution</th>
                  <th>Engagement Score</th>
                </tr>
              </thead>
              <tbody>
                {% for institution, score in pol_institution_scores.items() %}
                <tr>
                  <td>{{ institution }}</td>
                  <td>{{ score }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </section>
      </div>

      <!-- Chart Section: Visualize Processing Times -->
      <section class="chart-section">
        <h2>Processing Time Visualization</h2>
        <div class="chart-container">
          <canvas id="processingTimeChart" width="200" height="100"></canvas>
        </div>
      </section>
    </main>
    <footer>
      <p>&copy; 2025 Engagement Report Dashboard</p>
    </footer>

    <script>
      // Tab switching function
      function showTab(tabId, event) {
        const tabs = document.querySelectorAll(".tab-content");
        tabs.forEach((tab) => tab.classList.remove("active"));
        document.getElementById(tabId).classList.add("active");

        const buttons = document.querySelectorAll(".tab-button");
        buttons.forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");
      }

      // Chart.js code to visualize processing times
      const fdTime = Number("{{ fd_total_time }}");
      const pdTime = Number("{{ pd_total_time }}");
      const polTime = Number("{{ pol_total_time }}");

      const ctx = document
        .getElementById("processingTimeChart")
        .getContext("2d");
      const processingTimeChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["FireDucks", "Pandas", "Polars"],
          datasets: [
            {
              label: "Processing Time (seconds)",
              data: [fdTime, pdTime, polTime],
              backgroundColor: [
                "rgba(46, 204, 113, 0.7)", // Green for FireDucks
                "rgba(52, 152, 219, 0.7)", // Blue for Pandas
                "rgba(155, 89, 182, 0.7)", // Purple for Polars
              ],
              borderColor: [
                "rgba(46, 204, 113, 1)",
                "rgba(52, 152, 219, 1)",
                "rgba(155, 89, 182, 1)",
              ],
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: "Seconds",
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
